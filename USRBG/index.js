(function(t,u,R,$,y,i,e,a,d){"use strict";const{ScrollView:w}=d.General,{FormSection:v,FormRow:n}=d.Forms;function m(){return e.React.createElement(w,null,e.React.createElement(v,null,e.React.createElement(n,{label:"Discord Server",leading:e.React.createElement(n.Icon,{source:a.getAssetIDByName("Discord")}),trailing:n.Arrow,onPress:function(){return e.url.openDeeplink("https://discord.gg/TeRQEPb")}}),e.React.createElement(n,{label:"Reload DB",leading:e.React.createElement(n.Icon,{source:a.getAssetIDByName("ic_message_retry")}),onPress:async function(){return await l()?i.showToast("Reloaded DB",a.getAssetIDByName("check")):i.showToast("Failed to reload DB",a.getAssetIDByName("small"))}})))}const b=R.findByProps("default","getUserBannerURL");let r,f;const l=async function(){try{return r=await(await y.safeFetch("https://usrbg.is-hardly.online/users",{cache:"no-store"})).json(),r}catch(o){u.logger.error("Failed to fetch userBG data",o)}},E=async function(){if(await l(),!r)return i.showToast("Failed to load DB");const{endpoint:o,bucket:g,prefix:h,users:U}=r;f=$.after("getUserBannerURL",b,function(A){let[B]=A;const D=Object.entries(U).find(function(c){let[s,p]=c;return s===B?.id});if(B?.banner===void 0&&D){const[c,s]=D;return u.logger.log(`${o}/${g}/${h}${c}?${s}`),`${o}/${g}/${h}${c}?${s}`}})},F=function(){return f?.()},I=m;return t.fetchData=l,t.onLoad=E,t.onUnload=F,t.settings=I,t})({},vendetta,vendetta.metro,vendetta.patcher,vendetta.utils,vendetta.ui.toasts,vendetta.metro.common,vendetta.ui.assets,vendetta.ui.components);
